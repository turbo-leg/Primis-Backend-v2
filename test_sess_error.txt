============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /usr/local/bin/python
cachedir: .pytest_cache
rootdir: /app
plugins: anyio-4.12.1
collecting ... collected 2 items

tests/api/test_class_sessions.py::test_create_class_session FAILED
tests/api/test_class_sessions.py::test_read_sessions PASSED

=================================== FAILURES ===================================
__________________________ test_create_class_session ___________________________

client = <starlette.testclient.TestClient object at 0x747d43b0e890>
db = <sqlalchemy.orm.session.Session object at 0x747d43f54a10>

    def test_create_class_session(client: TestClient, db) -> None:
        # 1. Login
        login_data = {"username": "instructor@example.com", "password": "password123"}
        # Ensure user exists (relying on previous tests or DB state)
        client.post(f"{settings.API_V1_STR}/auth/register", json={"email": "instructor@example.com", "password": "Password123!", "first_name": "Inst", "last_name": "Ructor"})
        login_data = {"username": "instructor@example.com", "password": "Password123!"}
>       a_token = r.json()["access_token"]
                  ^
E       UnboundLocalError: cannot access local variable 'r' where it is not associated with a value

tests/api/test_class_sessions.py:11: UnboundLocalError
=============================== warnings summary ===============================
app/core/config.py:4
  /app/app/core/config.py:4: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

app/schemas/user.py:20
  /app/app/schemas/user.py:20: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Profile(ProfileBase):

app/schemas/user.py:44
  /app/app/schemas/user.py:44: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserResponse(UserBase):

app/schemas/course.py:20
  /app/app/schemas/course.py:20: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CourseResponse(CourseBase):

app/schemas/class_session.py:25
  /app/app/schemas/class_session.py:25: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ClassSessionResponse(ClassSessionBase):

../usr/local/lib/python3.11/site-packages/passlib/utils/__init__.py:854
  /usr/local/lib/python3.11/site-packages/passlib/utils/__init__.py:854: DeprecationWarning: 'crypt' is deprecated and slated for removal in Python 3.13
    from crypt import crypt as _crypt

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/api/test_class_sessions.py::test_create_class_session - UnboundL...
=================== 1 failed, 1 passed, 6 warnings in 0.49s ====================
